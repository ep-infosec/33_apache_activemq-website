<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>activemq-cpp-3.4.0: activemq::core::ActiveMQTransactionContext Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">activemq-cpp-3.4.0</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classactivemq_1_1core_1_1_active_m_q_transaction_context.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>activemq::core::ActiveMQTransactionContext Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="activemq::core::ActiveMQTransactionContext" --><!-- doxytag: inherits="cms::XAResource" -->
<p>Transaction Management class, hold messages that are to be redelivered upon a request to roll-back.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_active_m_q_transaction_context_8h_source.html">src/main/activemq/core/ActiveMQTransactionContext.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for activemq::core::ActiveMQTransactionContext:</div>
<div class="dyncontent">
<div class="center"><img src="classactivemq_1_1core_1_1_active_m_q_transaction_context__inherit__graph.png" border="0" usemap="#activemq_1_1core_1_1_active_m_q_transaction_context_inherit__map" alt="Inheritance graph"/></div>
<map name="activemq_1_1core_1_1_active_m_q_transaction_context_inherit__map" id="activemq_1_1core_1_1_active_m_q_transaction_context_inherit__map">
<area shape="rect" id="node2" href="classcms_1_1_x_a_resource.html" title="The XAResource interface is a CMS mapping of the industry standard XA interface based on the X/Open C..." alt="" coords="103,5,244,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a580bc490a3feecdef7a2c18588901808">ActiveMQTransactionContext</a> (<a class="el" href="classactivemq_1_1core_1_1_active_m_q_session.html">ActiveMQSession</a> *session, const <a class="el" href="classdecaf_1_1util_1_1_properties.html">decaf::util::Properties</a> &amp;properties)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a580bc490a3feecdef7a2c18588901808"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#ac4dfef10adcd7d8aeae084f347271fb6">~ActiveMQTransactionContext</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a50012b5760c612bd94110f1f8bb6c55a">addSynchronization</a> (const <a class="el" href="classdecaf_1_1lang_1_1_pointer.html">Pointer</a>&lt; <a class="el" href="classactivemq_1_1core_1_1_synchronization.html">Synchronization</a> &gt; &amp;sync)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a <a class="el" href="classactivemq_1_1core_1_1_synchronization.html" title="Transacted Object Synchronization, used to sync the events of a Transaction with the items in the Tra...">Synchronization</a> to this Transaction.  <a href="#a50012b5760c612bd94110f1f8bb6c55a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a0bcf3031be01589289c1c5f801944233">removeSynchronization</a> (const <a class="el" href="classdecaf_1_1lang_1_1_pointer.html">Pointer</a>&lt; <a class="el" href="classactivemq_1_1core_1_1_synchronization.html">Synchronization</a> &gt; &amp;sync)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a <a class="el" href="classactivemq_1_1core_1_1_synchronization.html" title="Transacted Object Synchronization, used to sync the events of a Transaction with the items in the Tra...">Synchronization</a> to this Transaction.  <a href="#a0bcf3031be01589289c1c5f801944233"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a1d3b8764b523f1ea65c082e37f8f1718">begin</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Begins a new transaction if one is not currently in progress.  <a href="#a1d3b8764b523f1ea65c082e37f8f1718"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#aa7313c29c280f59afdfa248a2e871e9d">commit</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Commit the current Transaction.  <a href="#aa7313c29c280f59afdfa248a2e871e9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#af319574fc790804eb8098766d3da9f2e">rollback</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback the current Transaction.  <a href="#af319574fc790804eb8098766d3da9f2e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual const <br class="typebreak"/>
<a class="el" href="classdecaf_1_1lang_1_1_pointer.html">decaf::lang::Pointer</a><br class="typebreak"/>
&lt; <a class="el" href="classactivemq_1_1commands_1_1_transaction_id.html">commands::TransactionId</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a9f1ba53cbbd2f53d2501f2e9b453d393">getTransactionId</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Transaction Id object for the current Transaction, returns NULL if no transaction is running.  <a href="#a9f1ba53cbbd2f53d2501f2e9b453d393"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a36a85310c2a11ecfa1be03e84ba36aa3">isInTransaction</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if there is currently a Transaction in progress returns false if not, true otherwise.  <a href="#a36a85310c2a11ecfa1be03e84ba36aa3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a11230957c1a4d634262128edb1225190">isInLocalTransaction</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if there is currently an Local Transaction in progess, returns false if not, true otherwise.  <a href="#a11230957c1a4d634262128edb1225190"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a4cdfbdc37dcc2d20893226048175009a">isInXATransaction</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if there is currently an XA Transaction in progess, returns false if not, true otherwise.  <a href="#a4cdfbdc37dcc2d20893226048175009a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a6192d0d60352c106eaa4634feab8f481">commit</a> (const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *xid, bool onePhase)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Commits a global transaction.  <a href="#a6192d0d60352c106eaa4634feab8f481"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a8adaf142de0d078ba2a57c3a2d05e78c">end</a> (const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *xid, int flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Ends the work done for a transaction branch.  <a href="#a8adaf142de0d078ba2a57c3a2d05e78c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a938a99404962df9b4c2e4d0cf7338123">forget</a> (const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *xid)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Informs the Resource Manager that it can forget about a specified transaction branch.  <a href="#a938a99404962df9b4c2e4d0cf7338123"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a974b07eca37d636aa2d925b9739274fb">getTransactionTimeout</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the transaction timeout value for this XAResource.  <a href="#a974b07eca37d636aa2d925b9739274fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a52b4eb6d9c08e138a79e56277e948740">isSameRM</a> (const <a class="el" href="classcms_1_1_x_a_resource.html">cms::XAResource</a> *theXAResource)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the ResourceManager for this XAResource is the same as the Resource Manager for a supplied XAResource.  <a href="#a52b4eb6d9c08e138a79e56277e948740"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a40831fc56a1a846a988e8f36e612e0cd">prepare</a> (const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *xid)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests the Resource manager to prepare to commit a specified transaction.  <a href="#a40831fc56a1a846a988e8f36e612e0cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#af3344d9bf3fc7432945764ff5a0225dc">recover</a> (int flag, <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> **recovered)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a list of prepared transaction branches.  <a href="#af3344d9bf3fc7432945764ff5a0225dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a600e044045bc476265ff42778cea2eca">rollback</a> (const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *xid)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests the Resource Manager to rollback a specified transaction branch.  <a href="#a600e044045bc476265ff42778cea2eca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a5d7b91d393ed9483b4ae9c05431a5e60">setTransactionTimeout</a> (int seconds)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the transaction timeout value for this XAResource.  <a href="#a5d7b91d393ed9483b4ae9c05431a5e60"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html#a434abb0d9587de731fd8b1af6d641c9e">start</a> (const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *xid, int flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts work for a specified transaction branch.  <a href="#a434abb0d9587de731fd8b1af6d641c9e"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Transaction Management class, hold messages that are to be redelivered upon a request to roll-back. </p>
<p>The Transaction represents an always running transaction, when it is committed or rolled back it silently creates a new transaction for the next set of messages. The only way to permanently end this transaction is to delete it.</p>
<dl class="since"><dt><b>Since:</b></dt><dd>2.0 </dd></dl>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a580bc490a3feecdef7a2c18588901808"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::ActiveMQTransactionContext" ref="a580bc490a3feecdef7a2c18588901808" args="(ActiveMQSession *session, const decaf::util::Properties &amp;properties)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">activemq::core::ActiveMQTransactionContext::ActiveMQTransactionContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_session.html">ActiveMQSession</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdecaf_1_1util_1_1_properties.html">decaf::util::Properties</a> &amp;&#160;</td>
          <td class="paramname"><em>properties</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>The session that contains this transaction </td></tr>
    <tr><td class="paramname">properties</td><td>Configuration parameters for this object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac4dfef10adcd7d8aeae084f347271fb6"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::~ActiveMQTransactionContext" ref="ac4dfef10adcd7d8aeae084f347271fb6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual activemq::core::ActiveMQTransactionContext::~ActiveMQTransactionContext </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a50012b5760c612bd94110f1f8bb6c55a"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::addSynchronization" ref="a50012b5760c612bd94110f1f8bb6c55a" args="(const Pointer&lt; Synchronization &gt; &amp;sync)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::addSynchronization </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdecaf_1_1lang_1_1_pointer.html">Pointer</a>&lt; <a class="el" href="classactivemq_1_1core_1_1_synchronization.html">Synchronization</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>sync</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a <a class="el" href="classactivemq_1_1core_1_1_synchronization.html" title="Transacted Object Synchronization, used to sync the events of a Transaction with the items in the Tra...">Synchronization</a> to this Transaction. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sync</td><td>- The <a class="el" href="classactivemq_1_1core_1_1_synchronization.html" title="Transacted Object Synchronization, used to sync the events of a Transaction with the items in the Tra...">Synchronization</a> instance to add. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1d3b8764b523f1ea65c082e37f8f1718"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::begin" ref="a1d3b8764b523f1ea65c082e37f8f1718" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Begins a new transaction if one is not currently in progress. </p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">ActiveMQException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa7313c29c280f59afdfa248a2e871e9d"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::commit" ref="aa7313c29c280f59afdfa248a2e871e9d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::commit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Commit the current Transaction. </p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">ActiveMQException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6192d0d60352c106eaa4634feab8f481"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::commit" ref="a6192d0d60352c106eaa4634feab8f481" args="(const cms::Xid *xid, bool onePhase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::commit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>onePhase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Commits a global transaction. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xid</td><td>the XID which identifies the global transaction. </td></tr>
    <tr><td class="paramname">onePhase</td><td>true if the resource manager should use a one-phase commit protocol to commit the transaction.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurred. </td></tr>
  </table>
  </dd>
</dl>
<p>Possible errors are identified by the errorcode in the XAException and include: XA_HEURHAZ, XA_HEURCOM, XA_HEURRB, XA_HEURMIX, XAER_RMERR, XAER_RMFAIL, XAER_NOTA, XAER_INVAL, or XAER_PROTO. In addition, one of the XA_RB* errors can occur if the transaction was not committed and onePhase was set to true. On completion of this method, the Resource Manager has rolled back the transaction and released resources held by the transaction. </p>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#ae52536f123d2eb3d2ad813f4a87cc877">cms::XAResource</a>.</p>

</div>
</div>
<a class="anchor" id="a8adaf142de0d078ba2a57c3a2d05e78c"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::end" ref="a8adaf142de0d078ba2a57c3a2d05e78c" args="(const cms::Xid *xid, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::end </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Ends the work done for a transaction branch. </p>
<p>The Resource Manager disconnects the XA resource from the transaction branch and allows the transaction to complete.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xid</td><td>the XID which identifies the global transaction. Should have previously been used as the parameter to a start. method. </td></tr>
    <tr><td class="paramname">flags</td><td>a flags integer - one of: XAResource::TMSUCCESS, XAResource::TMFAIL, or XAResource::TMSUSPEND. </td></tr>
  </table>
  </dd>
</dl>
<p>TMSUCCESS means that this section of work completed successfully. </p>
<p>TMFAIL means that this section of work failed. The Resource Manager can mark the transaction for rollback only. </p>
<p>TMSUSPEND means that this section of work is suspended and not yet complete. The associated transaction context is also suspended and must be restarted with a call to <a class="el" href="">start(Xid, int)</a> with the TMRESUME flag.</p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurs. Possible error identified in the errorcode include: XAER_RMERR, XAER_RMFAIL, XAER_NOTA, XAER_INVAL, XAER_PROTO, or XA_RB*. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#a9dd11c9f2f0c66fc5978ee224b90c0b6">cms::XAResource</a>.</p>

</div>
</div>
<a class="anchor" id="a938a99404962df9b4c2e4d0cf7338123"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::forget" ref="a938a99404962df9b4c2e4d0cf7338123" args="(const cms::Xid *xid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::forget </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *&#160;</td>
          <td class="paramname"><em>xid</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Informs the Resource Manager that it can forget about a specified transaction branch. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xid</td><td>the XID which identifies the global transaction.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurs. Possible error identified in the errorcode include: XAER_RMERR, XAER_RMFAIL, XAER_NOTA, XAER_INVAL, or XAER_PROTO. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#aed4a352da4e57b39237596465c846302">cms::XAResource</a>.</p>

</div>
</div>
<a class="anchor" id="a9f1ba53cbbd2f53d2501f2e9b453d393"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::getTransactionId" ref="a9f1ba53cbbd2f53d2501f2e9b453d393" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual const <a class="el" href="classdecaf_1_1lang_1_1_pointer.html">decaf::lang::Pointer</a>&lt;<a class="el" href="classactivemq_1_1commands_1_1_transaction_id.html">commands::TransactionId</a>&gt;&amp; activemq::core::ActiveMQTransactionContext::getTransactionId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the Transaction Id object for the current Transaction, returns NULL if no transaction is running. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>TransactionInfo </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidStateException</td><td>if a Transaction is not in progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a974b07eca37d636aa2d925b9739274fb"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::getTransactionTimeout" ref="a974b07eca37d636aa2d925b9739274fb" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int activemq::core::ActiveMQTransactionContext::getTransactionTimeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the transaction timeout value for this XAResource. </p>
<p>The default timeout value is the default timeout value set for the Resource Manager.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the transaction timeout value for this XAResource in seconds.</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurs. Possible error identified in the errorcode include: XAER_RMERR and XAER_RMFAIL. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#a97605ca8f12df606ce1354b7887811c5">cms::XAResource</a>.</p>

</div>
</div>
<a class="anchor" id="a11230957c1a4d634262128edb1225190"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::isInLocalTransaction" ref="a11230957c1a4d634262128edb1225190" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool activemq::core::ActiveMQTransactionContext::isInLocalTransaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks to see if there is currently an Local Transaction in progess, returns false if not, true otherwise. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if an Local Transaction is in progress. </dd></dl>

</div>
</div>
<a class="anchor" id="a36a85310c2a11ecfa1be03e84ba36aa3"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::isInTransaction" ref="a36a85310c2a11ecfa1be03e84ba36aa3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool activemq::core::ActiveMQTransactionContext::isInTransaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks to see if there is currently a Transaction in progress returns false if not, true otherwise. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if a transaction is in progress. </dd></dl>

</div>
</div>
<a class="anchor" id="a4cdfbdc37dcc2d20893226048175009a"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::isInXATransaction" ref="a4cdfbdc37dcc2d20893226048175009a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool activemq::core::ActiveMQTransactionContext::isInXATransaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks to see if there is currently an XA Transaction in progess, returns false if not, true otherwise. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if an XA Transaction is in progress. </dd></dl>

</div>
</div>
<a class="anchor" id="a52b4eb6d9c08e138a79e56277e948740"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::isSameRM" ref="a52b4eb6d9c08e138a79e56277e948740" args="(const cms::XAResource *theXAResource)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool activemq::core::ActiveMQTransactionContext::isSameRM </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcms_1_1_x_a_resource.html">cms::XAResource</a> *&#160;</td>
          <td class="paramname"><em>theXAResource</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if the ResourceManager for this XAResource is the same as the Resource Manager for a supplied XAResource. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">theXAResource</td><td>an XAResource object </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the Resource Manager for this XAResource is the same as the Resource Manager for <code>theXAResource</code>. </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurs. Possible error identified in the errorcode include: XAER_RMERR and XAER_RMFAIL. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#ae277d9cdb092fefa979b9c73d312d0ab">cms::XAResource</a>.</p>

</div>
</div>
<a class="anchor" id="a40831fc56a1a846a988e8f36e612e0cd"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::prepare" ref="a40831fc56a1a846a988e8f36e612e0cd" args="(const cms::Xid *xid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int activemq::core::ActiveMQTransactionContext::prepare </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *&#160;</td>
          <td class="paramname"><em>xid</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Requests the Resource manager to prepare to commit a specified transaction. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xid</td><td>the XID which identifies the global transaction.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>an integer: XA_RDONLY or XA_OK. XA_OK implies that the transaction work has been prepared normally, XA_RDONLY implies that the transaction branch is read only and has been committed. If there is a failure which requires a rollback, an XAException is raised.</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurs. Possible error identified in the errorcode include: XA_RB*, XAER_RMERR, XAER_RMFAIL, XAER_NOTA, XAER_INVAL, or XAER_PROTO. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#a3540a731b294cc2ea4bcc580072bd09f">cms::XAResource</a>.</p>

</div>
</div>
<a class="anchor" id="af3344d9bf3fc7432945764ff5a0225dc"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::recover" ref="af3344d9bf3fc7432945764ff5a0225dc" args="(int flag, cms::Xid **recovered)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int activemq::core::ActiveMQTransactionContext::recover </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcms_1_1_xid.html">cms::Xid</a> **&#160;</td>
          <td class="paramname"><em>recovered</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a list of prepared transaction branches. </p>
<p>Typically used by a transaction manager during recovery to find transaction branches that are in prepared or heuristically completed states.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>an integer. Must be one of: XAResource::TMSTARTRSCAN, XAResource::TMENDRSCAN, XAResource::TMNOFLAGS.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>an array of zero or more XIDs identifying the transaction branches in the prepared or heuristically completed states.</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurs. Possible error identified in the errorcode include: XAER_RMERR, XAER_RMFAIL, XAER_INVAL, and XAER_PROTO. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#a03895d28f59daed8c9d2ffa937462378">cms::XAResource</a>.</p>

</div>
</div>
<a class="anchor" id="a0bcf3031be01589289c1c5f801944233"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::removeSynchronization" ref="a0bcf3031be01589289c1c5f801944233" args="(const Pointer&lt; Synchronization &gt; &amp;sync)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::removeSynchronization </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdecaf_1_1lang_1_1_pointer.html">Pointer</a>&lt; <a class="el" href="classactivemq_1_1core_1_1_synchronization.html">Synchronization</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>sync</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes a <a class="el" href="classactivemq_1_1core_1_1_synchronization.html" title="Transacted Object Synchronization, used to sync the events of a Transaction with the items in the Tra...">Synchronization</a> to this Transaction. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sync</td><td>- The <a class="el" href="classactivemq_1_1core_1_1_synchronization.html" title="Transacted Object Synchronization, used to sync the events of a Transaction with the items in the Tra...">Synchronization</a> instance to add. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a600e044045bc476265ff42778cea2eca"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::rollback" ref="a600e044045bc476265ff42778cea2eca" args="(const cms::Xid *xid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::rollback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *&#160;</td>
          <td class="paramname"><em>xid</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Requests the Resource Manager to rollback a specified transaction branch. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xid</td><td>the XID which identifies the transaction branch.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurs. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#a2e88cbccff7fa6a336806414c2daeb5a">cms::XAResource</a>.</p>

</div>
</div>
<a class="anchor" id="af319574fc790804eb8098766d3da9f2e"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::rollback" ref="af319574fc790804eb8098766d3da9f2e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::rollback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Rollback the current Transaction. </p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">ActiveMQException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5d7b91d393ed9483b4ae9c05431a5e60"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::setTransactionTimeout" ref="a5d7b91d393ed9483b4ae9c05431a5e60" args="(int seconds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool activemq::core::ActiveMQTransactionContext::setTransactionTimeout </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the transaction timeout value for this XAResource. </p>
<p>If the value is set to 0, the default timeout value for the Resource Manager is used.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">seconds</td><td>the new Timeout value in seconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the transaction timeout value has been updated, false otherwise.</dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurs. Possible error identified in the errorcode include: XAER_RMERR, XAER_RMFAIL, or XAER_INVAL. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#ae0eaac2bc4fd3fb8c807f7bdeac8c2a6">cms::XAResource</a>.</p>

</div>
</div>
<a class="anchor" id="a434abb0d9587de731fd8b1af6d641c9e"></a><!-- doxytag: member="activemq::core::ActiveMQTransactionContext::start" ref="a434abb0d9587de731fd8b1af6d641c9e" args="(const cms::Xid *xid, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activemq::core::ActiveMQTransactionContext::start </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcms_1_1_xid.html">cms::Xid</a> *&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts work for a specified transaction branch. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xid</td><td>the XID which identifies the transaction branch. </td></tr>
    <tr><td class="paramname">flags</td><td>an integer. Must be one of XAResource::TMNOFLAGS, XAResource::TMJOIN, or XAResource::TMRESUME. </td></tr>
  </table>
  </dd>
</dl>
<p>TMJOIN implies that the start applies to joining a transaction previously passed to the Resource Manager. </p>
<p>TMRESUME implies that the start applies to a suspended transaction that should be restarted. </p>
<p>If TMNOFLAGS is specified, then if the transaction has been previously seen by the Resource Manager, an XAException is raised with the code XAER_DUPID.</p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">XAException</td><td>if an error occurs. Possible error identified in the errorcode include: XA_RB*, XAER_RMERR, XAER_RMFAIL, XAER_DUPID, XAER_OUTSIDE, XAER_NOTA, XAER_INVAL, or XAER_PROTO. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classcms_1_1_x_a_resource.html#a90850ed5d77e2f3f4c349888e847874c">cms::XAResource</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/main/activemq/core/<a class="el" href="_active_m_q_transaction_context_8h_source.html">ActiveMQTransactionContext.h</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceactivemq.html">activemq</a>      </li>
      <li class="navelem"><a class="el" href="namespaceactivemq_1_1core.html">core</a>      </li>
      <li class="navelem"><a class="el" href="classactivemq_1_1core_1_1_active_m_q_transaction_context.html">ActiveMQTransactionContext</a>      </li>
      <li class="footer">Generated on Mon Apr 25 2011 for activemq-cpp-3.4.0 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>

</body>
</html>
